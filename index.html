<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Narrativa Interactiva</title>
    <!-- Carga de Tailwind CSS para un dise√±o moderno y responsive -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Configuraci√≥n del tema y fuente de Tailwind -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary': '#4f46e5',
                        'secondary': '#10b981',
                        'background': '#f9fafb',
                        'card': '#ffffff',
                        'icon-bg': '#eef2ff' /* Indigo 50 */
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style>
        /* Estilo para el cuerpo y asegurar que el fondo se extienda */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        /* Estilos para los botones de opci√≥n */
        .option-button {
            transition: all 0.2s ease-in-out;
        }
        .option-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.06);
        }
        /* Animaci√≥n de fade-in para el contenido */
        .fade-in {
            animation: fadeIn 0.8s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="p-4 sm:p-8 min-h-screen flex items-center justify-center">

    <div id="app" class="w-full max-w-2xl bg-card shadow-2xl rounded-xl p-6 sm:p-10 border border-gray-100">

        <h1 class="text-3xl sm:text-4xl font-extrabold text-primary mb-6 text-center">
            üåå El Viaje de la Ciberseguridad üõ°Ô∏è
        </h1>

        <!-- Contenedor de la historia -->
        <div id="story-container" class="space-y-6">
            
            <!-- NUEVO: Contenedor para el icono y el texto -->
            <div class="bg-background p-4 rounded-xl shadow-inner fade-in">
                <div class="flex items-start gap-4">
                    <!-- Icono de la escena (grande) -->
                    <div id="scene-icon" 
                         class="flex-shrink-0 text-5xl p-3 bg-icon-bg rounded-full shadow-lg">
                        <!-- El icono se inyecta aqu√≠ -->
                    </div>
                    
                    <!-- El texto de la historia se inyecta aqu√≠ -->
                    <p id="story-text" class="text-gray-700 text-lg leading-relaxed pt-2">
                        Cargando historia...
                    </p>
                </div>
            </div>

            <!-- Las opciones de decisi√≥n se inyectan aqu√≠ -->
            <div id="options-container" class="space-y-4 pt-4">
                <!-- Botones de opci√≥n -->
            </div>

            <!-- Secci√≥n de fin de juego o reinicio -->
            <div id="end-container" class="hidden text-center mt-8">
                <p id="end-message" class="text-2xl font-bold text-red-600 mb-4"></p>
                <button id="restart-button" onclick="startGame()"
                    class="w-full sm:w-auto px-6 py-3 bg-secondary text-white font-semibold rounded-lg shadow-md hover:bg-emerald-600 transition option-button">
                    Reiniciar Aventura
                </button>
            </div>
        </div>

    </div>

    <script>
        // Objeto global que contiene toda la estructura de la historia.
        // Cada clave es el ID de una escena o 'nodo'.
        const story = {
            'inicio': {
                // Se agreg√≥ üë§ para Alex y üë©‚Äçüíª para Elena
                text: "Eres üë§ Alex, un estudiante que est√° revisando sus redes sociales una noche. De repente, recibes un mensaje directo (DM) de üë©‚Äçüíª Elena, una amiga cercana. El mensaje dice: '¬°Oye! üò± Necesito un favor urgente. Mi cuenta est√° en problemas, me apareci√≥ que la van a suspender por esta publicaci√≥n. ¬øPuedes hacer clic aqu√≠ y darle a verificar r√°pido para que no me la cierren? ¬°Gracias, de verdad!' (El enlace es: 'bit.ly/soporte-urgente-instaface').",
                options: [
                    { text: "Opci√≥n A: ¬°Es Elena, la ayudar√© de inmediato!", next: 'clic_enlace' },
                    { text: "Opci√≥n B: Es muy raro que me pida esto. Revisar√© el perfil.", next: 'revision_perfil' },
                    { text: "Opci√≥n C: Le enviar√© un WhatsApp para confirmar que es ella.", next: 'verificacion_externa' }
                ],
                title: "Alerta en InstaFace: El Mensaje Urgente",
                icon: 'üì±' // Icono: Tel√©fono/Mensaje
            },
            
            'clic_enlace': {
                text: "Haces clic en el enlace. Te lleva a una p√°gina id√©ntica a la de inicio de sesi√≥n de la red social, pero notas que la direcci√≥n web dice 'instaface-soporte.com' en lugar de 'instaface.com'. Un mensaje parpadea: '¬°Advertencia de suspensi√≥n! Inicia sesi√≥n para evitar la p√©rdida de datos'.",
                options: [
                    { text: "Opci√≥n 1: Ignoro el detalle de la URL y pongo mi usuario/contrase√±a.", next: 'phishing_exitoso', consequence: 'Fallo al verificar la URL' },
                    { text: "Opci√≥n 2: ¬°Espera! La URL est√° mal. Cierro la ventana de inmediato.", next: 'alerta_phishing_cerrada', consequence: 'Verificaci√≥n de URL exitosa' }
                ],
                title: "El Enga√±o del Phishing",
                icon: '‚ö†Ô∏è' // Icono: Advertencia de sitio sospechoso
            },
            
            'revision_perfil': {
                // Se agreg√≥ üë©‚Äçüíª
                text: "Vas al perfil de üë©‚Äçüíª Elena. Ves que no ha publicado nada en varios d√≠as, y el mensaje que te envi√≥ no se relaciona con sus publicaciones recientes. Es inusual, adem√°s, la forma de escribir no parece la suya, usa demasiados emojis y urgencia.",
                options: [
                    { text: "Decisi√≥n A: Ya revis√© el perfil, sigo sin estar seguro. Clic en el enlace para investigar m√°s.", next: 'clic_enlace', consequence: 'Curiosidad peligrosa' },
                    { text: "Decisi√≥n B: Esto es una estafa. Bloqueo al usuario y reporto el mensaje.", next: 'alerta_phishing_bloqueada', consequence: 'Acci√≥n de seguridad inmediata' }
                ],
                title: "An√°lisis del Contexto",
                icon: 'üîç' // Icono: B√∫squeda/Inspecci√≥n
            },

            'verificacion_externa': {
                // Se agreg√≥ üë©‚Äçüíª
                text: "Le escribes un WhatsApp a üë©‚Äçüíª Elena: 'Oye, me enviaste un DM raro, ¬øeres t√∫?' Ella te responde: '¬°No! Mi cuenta fue hackeada, ¬°no abras nada! ¬°Gracias por avisar!'",
                options: [
                    { text: "Continuar", next: 'alerta_phishing_bloqueada' }
                ],
                title: "Verificaci√≥n Cruzada",
                icon: '‚úÖ' // Icono: Verificado/Confirmado
            },
            
            // --- Finales ---
            
            'phishing_exitoso': {
                text: "Has introducido tus credenciales en el sitio falso. En ese instante, la p√°gina desaparece y te redirige a la p√°gina de inicio real, pero ya es demasiado tarde. El atacante tiene tu usuario y contrase√±a. **CONSECUENCIA:** La pr√≥xima vez que intentes entrar, tu contrase√±a ya ha sido cambiada y tu cuenta ha sido comprometida.",
                options: [], // Final del juego
                isEnd: true,
                endMessage: "¬°CUENTA COMPROMETIDA! (Phishing Exitoso)",
                icon: 'üö®' // Icono: Alarma/Peligro
            },
            
            'alerta_phishing_cerrada': {
                text: "Al notar la URL sospechosa, cierras la ventana de inmediato. Aunque hiciste clic en el enlace, tu decisi√≥n de no introducir tus datos te salv√≥ del robo de credenciales. No obstante, te preguntas si ese clic pudo haber descargado algo en segundo plano.",
                options: [], // Final del juego
                isEnd: true,
                endMessage: "¬°SALVADO POR POCO! (Conciencia de URL)",
                icon: 'üö™' // Icono: Cierre/Salida
            },

            'alerta_phishing_bloqueada': {
                text: "¬°Excelente! Has actuado como un experto en ciberseguridad. Al contactar a üë©‚Äçüíª Elena por otro medio o al analizar las pistas (urgencia, URL extra√±a), confirmaste que era una estafa de ingenier√≠a social. Bloqueaste y reportaste el mensaje, minimizando el riesgo para ti y otros usuarios.",
                options: [], // Final del juego
                isEnd: true,
                endMessage: "¬°√âXITO EN SEGURIDAD! (Detecci√≥n y Reporte)",
                icon: 'ü•á' // Icono: Medalla/√âxito
            }
        };

        let currentScene = 'inicio';
        
        // Elementos del DOM
        const storyTextElement = document.getElementById('story-text');
        const optionsContainer = document.getElementById('options-container');
        const endContainer = document.getElementById('end-container');
        const endMessageElement = document.getElementById('end-message');
        const sceneIconElement = document.getElementById('scene-icon'); // Nuevo elemento
        
        /**
         * Muestra la escena actual y sus opciones.
         * @param {string} sceneId - La clave de la escena en el objeto 'story'.
         */
        function loadScene(sceneId) {
            const scene = story[sceneId];
            
            // 1. Ocultar el mensaje de fin y opciones anteriores
            optionsContainer.innerHTML = '';
            endContainer.classList.add('hidden');
            
            // Inicia la animaci√≥n de fade-in
            storyTextElement.parentElement.classList.remove('fade-in'); 
            void storyTextElement.parentElement.offsetWidth; // Trigger reflow
            storyTextElement.parentElement.classList.add('fade-in'); 

            // 2. Mostrar el texto de la historia y el √≠cono
            storyTextElement.textContent = scene.text;
            sceneIconElement.textContent = scene.icon || 'üìú'; // Muestra el √≠cono, si no existe usa uno por defecto
            document.getElementById('app').querySelector('h1').textContent = scene.title;
            
            // 3. Verificar si es un final
            if (scene.isEnd) {
                endMessageElement.textContent = scene.endMessage;
                endContainer.classList.remove('hidden');
                document.getElementById('app').querySelector('h1').textContent = "Fin de la Aventura";
                return;
            }
            
            // 4. Mostrar las opciones como botones
            scene.options.forEach(option => {
                const button = document.createElement('button');
                button.textContent = option.text;
                button.onclick = () => chooseOption(option.next);
                button.className = 'option-button w-full px-4 py-3 bg-primary text-white font-semibold rounded-lg shadow-md hover:bg-indigo-600 transition-colors duration-200';
                optionsContainer.appendChild(button);
            });
        }
        
        /**
         * Maneja la elecci√≥n de una opci√≥n y carga la siguiente escena.
         * @param {string} nextSceneId - La clave de la siguiente escena.
         */
        function chooseOption(nextSceneId) {
            currentScene = nextSceneId;
            loadScene(currentScene);
        }
        
        /**
         * Inicia o reinicia la simulaci√≥n.
         */
        function startGame() {
            currentScene = 'inicio';
            // Restablece el t√≠tulo principal al iniciar
            document.getElementById('app').querySelector('h1').textContent = story.inicio.title;
            loadScene(currentScene);
        }

        // Inicia la aplicaci√≥n al cargar la p√°gina
        window.onload = startGame;

    </script>
</body>
</html>
